# Configuration File untuk UMKM Analytics Platform
# VERSI FREE TIER - 100% Gratis (No Billing Required)

# ============================================
# GCP PROJECT SETTINGS
# ============================================
gcp:
  project_id: "ipsd-483408"
  region: "asia-southeast2"
  zone: "asia-southeast2-a"
  
# ============================================
# CLOUD STORAGE SETTINGS
# ============================================
storage:
  # Bucket name format: ${PROJECT_ID}-umkm-data
  bucket_name: "ipsd-483408-umkm-data"
  folders:
    raw: "raw"
    processed: "processed"
    archive: "archive"
    uploads: "uploads"
  lifecycle:
    raw_retention_days: 30
    processed_retention_days: 90
    archive_storage_class: "COLDLINE"

# ============================================
# BIGQUERY SETTINGS
# ============================================
bigquery:
  dataset_id: "umkm_analytics"
  location: "asia-southeast2"
  
  tables:
    # Tabel untuk data transaksi sample
    raw_sales:
      name: "raw_sales"
      partition_field: "sale_date"
      clustering_fields: ["category", "seller_location"]
      
    # Tabel untuk data Tokopedia Reviews
    tokopedia_reviews:
      name: "tokopedia_reviews"
      partition_field: "review_date"
      clustering_fields: ["product_category", "sentiment_label"]
      
    # Tabel ringkasan harian
    daily_summary:
      name: "daily_summary"
      partition_field: "summary_date"
      
    # Tabel prediksi (jika pakai ML)
    predictions:
      name: "sales_predictions"
      partition_field: "prediction_date"
  
  partition_expiration_days: 365

# ============================================
# CLOUD FUNCTIONS SETTINGS (Optional - requires billing)
# ============================================
# NOTE: Cloud Functions memerlukan billing account
# Alternatif: Gunakan Google Colab + GitHub Actions
cloud_functions:
  data_ingestion:
    name: "ingest-sales-data"
    runtime: "python311"
    memory: "256MB"
    timeout: "540s"
    max_instances: 10
    entry_point: "ingest_data"
    
  data_validation:
    name: "validate-sales-data"
    runtime: "python311"
    memory: "256MB"
    timeout: "300s"
    max_instances: 5
    entry_point: "validate_data"

# ============================================
# SCHEDULING - FREE ALTERNATIVES
# ============================================
# Cloud Scheduler memerlukan billing
# Gunakan GitHub Actions sebagai alternatif gratis
scheduling:
  method: "github_actions"
  workflows:
    daily_ingestion:
      cron: "0 2 * * *"  # Daily at 2 AM UTC (9 AM WIB)
      description: "Daily data ingestion"
    weekly_report:
      cron: "0 3 * * 0"  # Weekly on Sunday at 3 AM UTC
      description: "Weekly summary report"

# ============================================
# PUB/SUB SETTINGS (FREE TIER)
# ============================================
pubsub:
  topics:
    ingestion_trigger:
      name: "data-ingestion-trigger"
      message_retention_duration: "86400s"
    etl_trigger:
      name: "etl-complete-trigger"
      message_retention_duration: "86400s"
  
  subscriptions:
    ingestion_sub:
      name: "data-ingestion-sub"
      ack_deadline_seconds: 600

# ============================================
# DATA SOURCE SETTINGS
# ============================================
data_sources:
  # Local/Sample Data
  local:
    enabled: true
    paths:
      products: "data/sample/products.csv"
      transactions: "data/sample/transactions.csv"
      tokopedia_reviews: "data/kaggle/tokopedia_product_reviews_2025.csv"
  
  # API Configuration (jika tersedia)
  api:
    enabled: false
    endpoints:
      tokopedia: "https://api.tokopedia.com"
      shopee: "https://api.shopee.co.id"

# ============================================
# SECRETS MANAGEMENT - FREE ALTERNATIVE
# ============================================
# Secret Manager memerlukan billing
# Gunakan .env files atau GitHub Secrets
secrets:
  method: "environment_variables"
  template_file: ".env.template"
  required_secrets:
    - "GCP_PROJECT_ID"
    - "GCS_BUCKET"
    - "BQ_DATASET"

# ============================================
# MONITORING & LOGGING (FREE TIER)
# ============================================
monitoring:
  enabled: true
  metrics:
    - "bigquery/query/count"
    - "storage/object_count"
  alerts:
    error_rate_threshold: 0.1

logging:
  level: "INFO"
  include_trace: true

# ============================================
# LOOKER STUDIO SETTINGS
# ============================================
looker_studio:
  dashboard_name: "UMKM Analytics Dashboard"
  data_sources:
    - dataset: "umkm_analytics"
      table: "daily_summary"
    - dataset: "umkm_analytics"
      table: "tokopedia_reviews"

# ============================================
# FREE TIER NOTES
# ============================================
# Layanan yang TIDAK digunakan (memerlukan billing):
#   - Cloud Composer (Airflow) → Gunakan Google Colab
#   - Cloud Scheduler → Gunakan GitHub Actions
#   - Secret Manager → Gunakan .env files
#   - Cloud Build → Gunakan gcloud CLI
#
# Layanan FREE yang digunakan:
#   - BigQuery (1TB query/bulan gratis)
#   - Cloud Storage (5GB gratis)
#   - Pub/Sub (10GB/bulan gratis)
#   - Cloud Logging & Monitoring (50GB gratis)