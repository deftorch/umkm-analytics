# Monitoring configuration for Cloud Functions and BigQuery

# Function Errors Alert
function_errors:
  displayName: "High Function Error Rate"
  documentation:
    content: "The error rate for Cloud Functions is higher than 5%."
  userLabels:
    severity: "critical"
  conditions:
    - displayName: "Error Count > 5"
      conditionThreshold:
        filter: 'resource.type = "cloud_function" AND metric.type = "cloudfunctions.googleapis.com/function/execution_count" AND metric.labels.status != "ok"'
        comparison: "COMPARISON_GT"
        thresholdValue: 5
        duration: "300s"
        aggregations:
          - alignmentPeriod: "60s"
            perSeriesAligner: "ALIGN_RATE"
